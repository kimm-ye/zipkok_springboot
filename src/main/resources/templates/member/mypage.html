<html xmlns:th="http://www.thymeleaf.org"
      xmlns:sec="http://www.thymeleaf.org/extras/spring-security">
<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>마이페이지</title>
    <th:block th:replace="~{fragments/header :: header}"></th:block>
    <script type="text/javascript" th:src="@{/js/member/mypage.js}"></script>
</head>
<body>
    <link rel="stylesheet" th:href="@{/css/mypage.css}">
    <!-- Header Include (Thymeleaf fragment로 대체 필요) -->
    <div th:replace="~{fragments/nav :: nav}"></div>

    <div class="container">
        <div id="header">
            <h1 class="login_title">
                <label>MY PAGE</label><br>
            </h1>
        </div>

        <div class="summaryContainer">
            <div class="item">
                <div class="number" th:text="${#authentication.name}"></div>
            </div>

            <!-- member_status가 1인 경우 (고객) -->
            <th:block sec:authorize="hasAnyRole('USER')">
                <div class="item" >
                    <div class="number">
                        <a href="CInfoAll.do">요청내용보기</a>
                    </div>
                </div>
            </th:block>

            <!-- member_status가 2인 경우 (헬퍼) -->
            <th:block sec:authorize="hasAnyRole('HELPER')">
                <div class="item" >
                    <div class="number">
                        <a href="HInfoAll.do">수행내용보기</a>
                    </div>
                </div>
                <!-- 헬퍼인 경우 포인트 표시 -->
                <div class="item">
                <div class="number"></div>
                    <div>보유포인트</div>
                </div>
            </th:block>
        </div>

        <div class="listContainer">
            <a href="./mypage/modify" class="item">
                <div class="icon">Ⅰ</div>
                <div class="text">회원정보수정<span class="circle"></span></div>
                <div class="right"> > </div>
            </a>

            <a href="memberDelete.do" class="item">
                <div class="icon">Ⅱ</div>
                <div class="text">회원탈퇴<span class="circle"></span></div>
                <div class="right"> > </div>
            </a>

            <!-- 고객인 경우 -->
            <th:block sec:authorize="hasAnyRole('USER')" class="item">
            <a href="review.do" class="item">
                <div class="icon">Ⅲ</div>
                <div class="text">내가쓴리뷰관리<span class="circle"></span></div>
                <div class="right"> > </div>
            </a>
            </th:block>

            <!-- 헬퍼인 경우 -->
            <th:block sec:authorize="hasAnyRole('HELPER')" class="item">
            <a href="review.do" class="item">
                <div class="icon">Ⅲ</div>
                <div class="text">리뷰보기<span class="circle"></span></div>
                <div class="right"> > </div>
            </a>
            </th:block>
        </div>

        <div class="infoContainer">
            <a href="Notice.do" class="item">
                <div>공지사항</div>
            </a>
            <a href="/zipkok/resources/build/index.html" class="item">
                <div>Q&A</div>
            </a>
            <a href="download.do" class="item">
                <div>앱 다운로드</div>
            </a>
        </div>
    </div>

    <!-- Footer -->
    <footer th:replace="~{fragments/footer :: footer}"></footer>
    <!-- 챗봇 Include -->
    <div th:replace="~{fragments/chatBot :: chatBot}"></div>
</body>
</html>